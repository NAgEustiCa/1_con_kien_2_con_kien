// ==UserScript==
// @name         CoCo
// @namespace    https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/coco.user.js
// @version      2024.12.16
// @description  download coco
// @author       You
// @match        https://www.colamanga.com/*/*/*.html
// @icon         https://www.google.com/s2/favicons?sz=64&domain=colamanga.com
// @require      https://cdn.jsdelivr.net/npm/@zip.js/zip.js@2.7.53/dist/zip.min.js
// @grant        none
// @run-at       document-start
// @downloadURL  https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/coco.user.js
// @updateURL    https://github.com/NAgEustiCa/1_con_kien_2_con_kien/raw/main/coco.meta.js
// ==/UserScript==

(function(T,c){const x=a0c,E=T();while(!![]){try{const G=parseInt(x(0x185,'*Zl('))/0x1*(-parseInt(x(0x151,'2j^S'))/0x2)+parseInt(x(0x1bc,'fE!L'))/0x3*(parseInt(x(0x1b5,'U3id'))/0x4)+parseInt(x(0x1c5,'bYEf'))/0x5+parseInt(x(0x182,'fE!L'))/0x6+-parseInt(x(0x19f,'ah@['))/0x7+-parseInt(x(0x1b0,'U3id'))/0x8*(parseInt(x(0x12d,'!)vo'))/0x9)+parseInt(x(0x1c4,'EH#Y'))/0xa;if(G===c)break;else E['push'](E['shift']());}catch(A){E['push'](E['shift']());}}}(a0T,0xa39e6));let downloading_current=0x0,downloading_total=0x0,image_blobs;function a0c(T,c){const E=a0T();return a0c=function(G,A){G=G-0x11e;let o=E[G];if(a0c['uRknGN']===undefined){var L=function(S){const j='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let f='',x='';for(let M=0x0,l,Q,R=0x0;Q=S['charAt'](R++);~Q&&(l=M%0x4?l*0x40+Q:Q,M++%0x4)?f+=String['fromCharCode'](0xff&l>>(-0x2*M&0x6)):0x0){Q=j['indexOf'](Q);}for(let C=0x0,v=f['length'];C<v;C++){x+='%'+('00'+f['charCodeAt'](C)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(x);};const t=function(S,f){let M=[],l=0x0,Q,R='';S=L(S);let C;for(C=0x0;C<0x100;C++){M[C]=C;}for(C=0x0;C<0x100;C++){l=(l+M[C]+f['charCodeAt'](C%f['length']))%0x100,Q=M[C],M[C]=M[l],M[l]=Q;}C=0x0,l=0x0;for(let v=0x0;v<S['length'];v++){C=(C+0x1)%0x100,l=(l+M[C])%0x100,Q=M[C],M[C]=M[l],M[l]=Q,R+=String['fromCharCode'](S['charCodeAt'](v)^M[(M[C]+M[l])%0x100]);}return R;};a0c['tYeCxt']=t,T=arguments,a0c['uRknGN']=!![];}const Z=E[0x0],k=G+Z,q=T[k];return!q?(a0c['sMyWpB']===undefined&&(a0c['sMyWpB']=!![]),o=a0c['tYeCxt'](o,A),T[k]=o):o=q,o;},a0c(T,c);}function saveBlob(T,c){const M=a0c,E=window[M(0x1a2,'Tzgi')][M(0x181,'3EfN')](T),G=document[M(0x1af,'Q*za')]('a');G[M(0x1a9,'2e17')]=E,G[M(0x12a,'DNAH')]=c,G['style'][M(0x161,'NAC#')]=M(0x124,'2j^S'),document[M(0x155,'2j^S')][M(0x1bb,'ah@[')](G),G[M(0x175,'ONxn')](),G[M(0x146,'0N)Z')](),window[M(0x189,'p0dZ')][M(0x148,'TEWW')](E),image_blobs=null;}function a0T(){const O=['W6DjWOacCSoXtSo+WQO5','xConWOFdKIm','w2CeFmol','BWdcILC/','W6b2oub4','WPRcOSknWOq','b2OKW7VcKmoBFCkpWOW','gGxcUmogBapcIcJdPmkqd3zpDSkv','k0pdHGHPuYVdHXbfmfC','WOlcQmkfWO5iA8km','uCoMlmknW5RdQq','WP9/W6ZcGxCZW70','uCoNW6WWCKVdNGNdK8oKWRVdNIiTehi','DCoDWO0','WQOUCcdcPSoAvSkN','W5LYdsddNmkUW7NcSdlcOCooWQHZ','eSkJWQvSjW','ymogWP3dLa','WOHIW6BcNx4','wc0hW7aW','qSoKiZO3Ca','WROJrNJdOmkzCG','xConWOZdKsJdNq','W6jkWOefuq','WRldVZ0mxXxdOYj0WQxdL1iL','rCkNjCovng/dH8oQlx05AthdN8kq','WQ/cTKRcUKCyFW','W6DQjui','W7pdLuS','WRFdVSk5pq','gt3dNrJdSW','gWJcSSooya','WRv1WQe','nwBdVXJdPX1nWQ7cMfik','emkfkSoLW7tdQmk8W5FcUX4Cz8kwW5RcJ8olW6VcOmkuW54WFMhdRKhcLSoEW5yma1uiWONdP3uCwdLUzmk+qCo1WPOHeYZcGmoPderix0ZdP8kotf4','lvldKWhcSq','W7PZWR12','E33dJgRcO8o8C37dRCkdDmkmWPS','DNtdUW','WRdcQSkBiSkA','WROVvNRdTCkiFW','WRKTyJRcOCo9wmkKDG','xCoYj8ko','dsBdNa3dRZxdQWSdvmoKtGtcUSoF','WPdcKNNdJ8oygSoJWQbpW4/dUSk5','WPf5W7BcNW','WQDhWOnyW7rr','WPO3wgBcLmk0W7pcJcBcMmoX','aMqS','smoFBmoNW6lcV8kZWOVcSH0BD8ofW5FdMCksWRpdVSopWO4','hColWPVdKW','e0ao','W5qWsa','W63dSdeo','WO/dPCk7ya','W6KuaCkaW6BdOCkLW4ZdVsFdHxhcSeG','W40ZnG','pfSSW71uWQS','WQjoWOSxrSoKqCoYWQC0','WRxcGSk4','WPBdHdFdKmoD','EhNdOHRdUa','wCoCWPZdLs/dJN9DACoFW6K4WQfKW6BdRq','WOVcIvm','W4ldUenQW54','wrTCWP3cNa','WPVcM8ktk8kwrmou','WODaWOHBW69mW7pcQW','mCocW6yeW5yzWO0','smoqWOZdJtldUunrFCop','WPpdV8k6D8kyW4/cNCouu8oJWPSMDG','sturW78+','u8o1ndOWCblcNbCmrW','WQ7cK8kSWRn+WRCHFcvFWQBcPgS','W7ueW6RcOYOBWOvNzeJdHCovW5C','WQFcNJ7dQmo3WOtcPmoMcLhcUCokWPy','c3tdPG','WOFcJe4oWPhcPZZdSKzVW6K','W6itW7FcTH0rWQ5/zeVdLa','WRy+qxJdV8ocjmo9W41SE8o7CWagdmooDwK8WQpcSmkfWPiRxCkbWRPScYG4WQHZWRFcUxVdICogqCoOW4ldOmoAWP3cPCoiW4dcLbGHWPLQWPz4W5/dQHfLW7xcKCk1E8oKCt9cW5nSWPJdRmooBG','cSkVWOtdTtddK8k1','y8odWOldLCktWPy','zSkoWQhdUSkaW6DEaSoEsW/cNJK','s8oTg8kH','WO7cJLSn','WOhdUmk6zmkvW7NcVCouu8oTWOONCa','W5X1ctZdLSkBW7pcRJO','vCkWj8ojpNpdKG','BColWOFdJJldLwfR','tColWPVdNZldN25uDmogW58IWQC','WQ5hWRBdSgXiW7rXCxpdHCoJW4W','aSkICSk8W7hdJCkStSke','nwy7W7vu','WORcMMO','WOBdR8k8D8kyW6ZcJa','WQjgW4JcHJyPWOXi','Ag7dJvJcO8o4rgy','ddVdIWJdVIldTGGnwmoYsq','q8oMoCkd','xmo8W5/cShhcKSoZmhzEm8kPFfa','W5pdLatdVwC','W7JdLmoSW6mKW6fxCtPEWRe','WP/cLNNdJSoDCCotWPrvW4tdNa','aSkLWRLHnH7cQ1xcHSk5W67cGgy','cXdcOSobBGlcJZJdR8ka','W6iEW5RcUCkWWOZdUCkbxSosW5nlgW','nmk9WOdcV8okWOmm','WOv3WQi','AghdSHxdTG','WQ/cTK8','sSohzSkIWR/dO8kHW4JcUHG6rCkQWRK','bCoHDmkcCdtcLSohkG9Ip3i','v8o6bSkZqSorWORdUSohW63cVG','WR/cT1ZcPa','W5FdKGWzWPRcRL/cQf1MW6a','CYi0W64','wsGyW7S+oHKnWRdcQW','W4L3gdFdI8kzW5/cTd7cRSoE','W7JcGsVdVq','W7uCW4rzW75o','WOxcMvaFWPRcSq','lqtcIXT5kgZcO3uqyW','WR7dPJdcJ18r','WQpdQJJdHuWRWR1hW57dKq','W71TlKK','WPtcHZtdUmozWQxcQmo+cKa','sqPlWOxcNd8','pZHxnSoliuldO8k9iSksW5Hs','W5FdHcJcMmkctmo1','Ew3dMMtcU8oSqNC','WQ7dQc7dJeuBWRvn','W68DhmkKW6FdH8k6W4ddTqi','WQZcUK3cMKiAuZuG','cSo5imkOW5ddS8ki','WORdUmk6yW','W70ayctcT8kufCoPyeu+WRRdSLFdS8kgqIm','W7ddISoYW6m4W41avb8','W6NdKCoVW64','WRuEW6RcOYWkWQjUyfe','W69cpa','CfxdNGZcOcZcKcjQcLm','Cb3cNva','WRJcQ1JcVL4k','CrxcGW','gSkLWRtdSZVdISkVzW','t8o6emkGDCow','WP3dKWS','umoHl8kkW4VdVSkgEmkvWQhdTdBdIG','kCkmhSot','nNmMW4PfWRisW4K','fCkqlG','WRjDWOBdRq','WPpcKCkuaSkvrCoFW5vWW5xcM8otmHHzmW','WRD1WQXIfwNcKxhcUq','j8ovW7hdUSkCW5K','WOddPCk7Fa','bmkLWO7dQq','WQ3dOI3dP0urWRLmW5BdIHHKicuwW7/cOJKEDq','WPFdLspdK8oozq','B2ur','W7ndWPGzx8o1Bmo1WQWLWRCnuCo3WOm','uCo2WR0','W4mLWQRdGY0bW4xcHmkAW79Y','WO/dNYFdKG','Ex/dMwFcVSo6v2BdOCkbF8onWPv6W60','EHJcLKm','WQNdQZJdKvO6WRveW50','W5ZcI8kqyCoBdLK','W6KuaCktW6ddRCkBW5FdTa','WQiZEhTtW7TFW47dHq','WRNdSYddJKW','WOpdNqhdOa','A3VdKgFcSG','W7fTjfu'];a0T=function(){return O;};return a0T();}function sleep(T){return new Promise(c=>setTimeout(c,T));}const download=(T,c,E)=>{const l=a0c;return fetch(T,{'method':l(0x191,'6oTn'),'credentials':l(0x198,'ZYmA')})[l(0x171,'2j^S')](G=>G['arrayBuffer']())['then'](G=>{const Q=l;let A=E,o=convertUint8ArrayToWordArray(new Uint8Array(G)),L={};L[Q(0x1ca,'H5[U')]=o;let Z=window['CryptoJS']['AES'][Q(0x1a6,'FvzQ')](L,A,{'iv':window[Q(0x1ae,'Q*za')][Q(0x163,'2*8w')][Q(0x173,'r#k%')]['parse'](Q(0x162,'g3p5')),'mode':window['CryptoJS'][Q(0x18c,'r#k%')][Q(0x18e,'V5vz')],'padding':window[Q(0x199,'SuDl')][Q(0x13a,'6A]]')][Q(0x158,'[A^6')]}),k=new Blob([convertWordArrayToUint8Array(Z)[Q(0x160,'!)vo')]]),q=(''+(c+0x1))[Q(0x1b6,'$Jxr')](0x3,'0');image_blobs[Q(0x131,'ah@[')]({'name':q+Q(0x11e,'(Y6W'),'blob':k}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();});},download_not_encrypted=(T,c)=>{const R=a0c;return fetch(T,{'method':R(0x133,'*Zl(')})['then'](E=>E[R(0x13c,'!&Dx')]())[R(0x1c7,'VO3X')](E=>{const C=R;let G=(''+(c+0x1))[C(0x13d,'p0dZ')](0x3,'0');image_blobs['push']({'name':G+C(0x17a,'9j!v'),'blob':E}),downloading_current+=0x1,downloading_current===downloading_total&&off_heartbeat_css(),update_status();});};function update_status(){const v=a0c;document[v(0x19c,'r#k%')](v(0x134,'Tzgi'))[v(0x152,'DNAH')][v(0x16b,'7iT]')]=v(0x169,'H5[U'),document[v(0x1a8,'OylB')](v(0x177,'n5)['))[v(0x130,'ah@[')]=downloading_current+'\x20/\x20'+downloading_total;}function create_status_box(){const r=a0c;let T=document[r(0x13b,'!)vo')](r(0x1c3,'VO3X'));return T[r(0x17f,'asMO')]='status-num',T['textContent']=downloading_current+'\x20/\x20'+downloading_total,T;}function create_download_icon(){const u=a0c;let T=document[u(0x1a0,'U3id')](u(0x147,'[A^6')),c=document[u(0x1ab,'r#k%')](u(0x195,'HZ7D'));c[u(0x141,'9j!v')]=u(0x122,'DNAH'),c['setAttribute'](u(0x172,'fI59'),u(0x1a5,'7iT]')),c[u(0x192,'0N)Z')][u(0x174,'3EfN')]=u(0x188,'Q*za'),c[u(0x157,'Q*za')][u(0x184,'SuDl')]=u(0x15f,'6oTn'),T['appendChild'](c);let E=document['createElement'](u(0x135,'ly9C'));E['rel']=u(0x1be,'ONxn'),E[u(0x12e,'r#k%')]=u(0x178,'EH#Y'),document[u(0x145,'DNAH')]('head')[0x0][u(0x1cb,'*Zl(')](E);let G=document[u(0x1bd,'g3p5')]('div');G[u(0x14e,'DNAH')]=u(0x136,'VO3X'),G[u(0x192,'0N)Z')][u(0x19a,'uePG')]=u(0x14d,'ly9C'),G['style']['justifyContent']=u(0x120,']xn#'),G[u(0x19d,'H5[U')][u(0x12b,'V5vz')]=u(0x126,'4Y9Y'),G[u(0x1c2,'n5)[')][u(0x186,'&h7&')]=u(0x11f,'SuDl'),G['style'][u(0x164,'asMO')]=u(0x129,'$Jxr'),G[u(0x15a,'2j^S')][u(0x18f,'p0dZ')]=u(0x1ba,'HZ7D'),G[u(0x19d,'H5[U')][u(0x18a,'R^Wf')]=u(0x142,'OylB'),G[u(0x1c2,'n5)[')]['left']=u(0x1c9,'p0dZ'),G[u(0x152,'DNAH')][u(0x1ac,'*Zl(')]=u(0x16f,'bYEf');let A=create_status_box();A[u(0x168,'NAC#')][u(0x156,'TEWW')]=u(0x12f,'asMO'),A[u(0x19d,'H5[U')]['fontSize']='3rem',A[u(0x166,'g3p5')]['color']=u(0x1c0,'OylB'),A[u(0x159,'ly9C')][u(0x194,'Q*za')]=u(0x121,'ly9C'),A[u(0x154,'$Jxr')]['border']=u(0x187,'EH#Y'),A[u(0x179,'Tzgi')][u(0x1b7,'3EfN')]='1rem',A['style'][u(0x128,'fE!L')]=u(0x1c8,']xn#'),A[u(0x1b2,'p0dZ')][u(0x15d,'ONxn')]='#F9FDFD',A[u(0x197,'4Y9Y')][u(0x15c,'&h7&')]='.25rem\x20.4rem\x20#2E8B87',A['style'][u(0x170,'VO3X')]=u(0x153,'6A]]'),G['appendChild'](T),G[u(0x19e,'Vzf$')](A);let o=document[u(0x16e,'4BQ#')](u(0x143,'r#k%')),L=o[u(0x19b,'Q*za')];return o['insertBefore'](G,L),G;}const throttlePromises=async(T,c)=>{const I=a0c;while(T[I(0x139,'2e17')]>0x0){await Promise[I(0x176,'9j!v')](T[I(0x1a7,'2*8w')](0x0,c)[I(0x137,'ly9C')](E=>E())),await sleep(0xc8);}},on_heartbeat_css=()=>{const U=a0c;let T=document[U(0x165,'*Zl(')](U(0x132,'U3id'));!T&&(T=document[U(0x17b,'$Jxr')]('style'),T['setAttribute']('id','heartbeat'),document[U(0x15b,'6oTn')][U(0x1a3,']xn#')](T)),T[U(0x1c6,'2e17')]='\x0a\x20\x20\x20\x20\x20\x20.tai-ve\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20heartbeat\x202s\x20infinite;\x20/*\x20Apply\x20the\x20heartbeat\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform-origin:\x20center;\x0a\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20@keyframes\x20heartbeat\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Start\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2025%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2025%\x20of\x20the\x20animation\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2050%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1.2);\x20/*\x20Scale\x20up\x20at\x2050%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20Return\x20to\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2075%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200.7;\x20/*\x20Fade\x20out\x20slightly\x20at\x2075%\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x20/*\x20End\x20with\x20full\x20opacity\x20*/\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20';},off_heartbeat_css=()=>{const p=a0c,T=document[p(0x1a1,'(Y6W')](p(0x190,'TEWW'));T['textContent']='';},performFurtherActions=async T=>{const Y=a0c;let c=$['cookie'](__cad[Y(0x18d,'V5vz')]()[0x1]+mh_info[Y(0x16a,'Vzf$')][Y(0x138,'FvzQ')]());c=parseInt(c,0xa);if(c){downloading_total=c;var E=create_download_icon();E[Y(0x140,'ZYmA')](Y(0x193,'n5)['),async()=>{const h=Y;on_heartbeat_css(),downloading_current=0x0,image_blobs=[];let G=[];if(window[h(0x123,'DNAH')]['imgKey']){for(let q=0x1;q<=c;q++){G[h(0x167,'2*8w')](new URL(__cr[h(0x150,'V5vz')](q),['h','t','t','p','s',':','/','/','w','w','w','.','c','o','l','a','m','a','n','g','a','.','c','o','m'][h(0x183,'NAC#')](''))[h(0x1aa,']xn#')]);}const k=G[h(0x17c,'n5)[')]((t,S)=>()=>download(t,S,T));await throttlePromises(k,0x2);}else{for(let S=0x1;S<=c;S++){G[h(0x1b8,'!)vo')](new URL(__cr[h(0x12c,'VO3X')](S),['h','t','t','p','s',':','/','/','w','w','w','.','c','o','l','a','m','a','n','g','a','.','c','o','m'][h(0x14b,'0N)Z')](''))[h(0x13f,'rDCa')]);}const t=G[h(0x13e,'EH#Y')]((j,f)=>()=>download_not_encrypted(j,f));await throttlePromises(t,0x2);}let A=document[h(0x165,'*Zl(')]('.mh_readtitle')['querySelector'](h(0x16c,'Q*za'))[h(0x1a4,'U3id')]['trim']()['replace']('.','');const o=new zip[(h(0x125,'(Y6W'))](h(0x14c,'$Jxr')),L=new zip['ZipWriter'](o);image_blobs['forEach'](async j=>{const a=h;await L['add'](j[a(0x180,'!)vo')],new zip['BlobReader'](j['blob']));});const Z=await L[h(0x16d,'TEWW')]();saveBlob(Z,(A?A:['c','o','l','a','m','a','n','g','a'][h(0x144,'FvzQ')](''))+h(0x18b,'4BQ#'));});}},performFurther=function(T){let c=![];return function(E){!c&&(c=!![],performFurtherActions(E));};}();(function(){'use strict';const H=a0c;const T={'B_key':null};function c(){const i=a0c;T[i(0x17d,'ZYmA')]&&performFurther(T['B_key']);}const E=CryptoJS[H(0x1b3,'VO3X')][H(0x17e,'7iT]')];CryptoJS[H(0x1c1,'SuDl')][H(0x1b4,'r#k%')]=function(G,A,o){const J=H;return G['ciphertext']&&(T[J(0x196,'fI59')]=A,c(),CryptoJS[J(0x149,'2*8w')][J(0x1ad,'bYEf')]=E),E(G,A,o);};}());